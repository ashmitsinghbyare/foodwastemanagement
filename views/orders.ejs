<!DOCTYPE html>
<html>
<head>
  <title>All Orders</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link rel="stylesheet" href="css/order.css">
</head>
<body>

  <!-- Include Navbar -->
  <%- include('partials/orderNavbar') %>

  <h2>ğŸ“¦ Food Donation Orders</h2>

  <% orders.forEach(order => { %>
    <div class="order-card">
      <p><strong>ğŸ± Food:</strong> <%= order.foodname %> (<%= order.category %>, <%= order.meal %>)</p>
      <p><strong>ğŸ“ Location:</strong> <%= order.district %>, <%= order.address %></p>
      <p><strong>ğŸ“¦ Quantity:</strong> <%= order.quantity %></p>
      <p><strong>ğŸ‘¤ Donor:</strong> <%= order.name %> (<%= order.phoneno %>)</p>
      <p><strong>ğŸ—“ï¸ Pickup Time:</strong> <%= order.pickupTime ? new Date(order.pickupTime).toLocaleString() : 'Not set' %></p>

      <p>
        <strong>Status:</strong>
        <% if (order.status === 'Pending') { %>
          <span class="badge pending"><i class="fas fa-hourglass-half"></i> Pending</span>
        <% } else if (order.status === 'Scheduled') { %>
          <span class="badge scheduled"><i class="fas fa-calendar-check"></i> Scheduled</span>
        <% } else { %>
          <span class="badge completed"><i class="fas fa-check-circle"></i> Completed</span>
        <% } %>
      </p>

      <% if (order.status === 'Pending') { %>
        <form action="/orders/<%= order._id %>/schedule" method="POST">
          <input type="datetime-local" name="pickupTime" required />
          <button type="submit">ğŸ“… Accept & Schedule</button>
        </form>
        
      <% } else if (order.status === 'Scheduled') { %>
        <form action="/orders/<%= order._id %>/confirm" method="POST">
          <button type="submit">âœ… Mark as Completed</button>
        </form>
      <% } %>
    </div>
  <% }); %>

</body>
</html>
